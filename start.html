<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REAL 계산기</title>
</head>
<body>
    <div class="calculator">
        <input type="text" name="output" readonly="">
        <button class="btn" value="1" onclick="save.calcBefore.getBtnData()">1</button>
        <!-- <button class="btn1" value="1" onclick="calculatorInput.btn1Input()">1</button> -->
        <button class="operator" value="+" onclick="calculatorInput.btnPlusInput()">+</button>
        <button class="btn" value="2" onclick="calculatorInput.btn2Input()">2</button>
        <button class="operator result" value="=" onclick="calculatorInput.btnResultInput()">=</button>
    </div>
    <script>
        // 페이지 접속 및 새로고침시, input창 초기화
        window.onload = function() {
            document.getElementsByName("output")[0].value = "";
        }

        // 계산기 버튼별 클릭시 onclick이벤트 실행 및 값 반환
        let calculatorInput = {
            btn1Input : function(){
                let buttonTag = document.getElementsByClassName("btn")[0].value;
                document.getElementsByName("output")[0].value += buttonTag;
                return(buttonTag);
            },
            btn2Input : function(){
                let buttonTag = document.getElementsByClassName("btn")[1].value;
                document.getElementsByName("output")[0].value += buttonTag;
                return(buttonTag);
            },
            btnPlusInput : function(){
                let buttonTag = document.getElementsByClassName("operator")[0].value;
                document.getElementsByName("output")[0].value += buttonTag;
                return(buttonTag);
            },
            btnResultInput : function(){
                let buttonTag = document.getElementsByClassName("operator result")[0].value;
                document.getElementsByName("output")[0].value += buttonTag;
                return(buttonTag);
            }
        }

        // calculatorInput.btn1Input();
        // calculatorInput.btn2Input();
        // calculatorInput.btnPlusInput();
        // calculatorInput.btnResultInput();

        
        // 광훈오빠 입력 데이터 -> save에 저장
        // 저장값은 민규오빠가 출력할 때 사용할 것

        // 저장
        const save = {
            calcBefore: {
                // 광훈오빠 객체 불러오기
                getBtnData: function () {
                    const data = calculatorInput.btn1Input(); // 광훈오빠 객체로부터 데이터를 가져온다고 가정
                    this.saveInArr(data); // saveInArr 함수 실행
                },

                // data 배열에 저장
                saveArr: [], // 빈 배열 만들기

                saveInArr: function (data) {
                    this.saveArr.push(data)
                    // this.printArr();
                    this.saveInLocalStorage();
                },

                // test용
                // printArr: function () {
                //     console.log(this.saveArr)
                // },

                // 로컬스트리지에 저장하려면 배열->스트링 변화 필요
                changeTypeToSaveLocalStorage: function () {
                    const string = JSON.stringify(this.saveArr);
                    return string;
                },

                // 로컬스토리지 저장
                saveInLocalStorage: function () {
                    const string = this.changeTypeToSaveLocalStorage();
                    window.localStorage.setItem("calcBefore", string);
                }
            },

            calcAfter: {
                // 민규오빠 객체 불러오기
                getCalcData: function (test) {
                    const data = test; // 광훈오빠 객체로부터 데이터를 가져온다고 가정
                    this.saveInArr(data); // saveInArr 함수 실행
                },

                // data 배열에 저장
                saveArr: [], // 빈 배열 만들기

                saveInArr: function (data) {
                    this.saveArr.push(data)
                    // this.printArr();
                    this.saveInLocalStorage();
                },

                // test용
                // printArr: function () {
                //     console.log(this.saveArr)
                // },

                // 로컬스트리지에 저장하려면 배열->스트링 변화 필요
                changeTypeToSaveLocalStorage: function () {
                    const string = JSON.stringify(this.saveArr);
                    return string;
                },

                // 로컬스토리지 저장
                saveInLocalStorage: function () {
                    const string = this.changeTypeToSaveLocalStorage();
                    window.localStorage.setItem("calcAfter", string);
                }
            }
        }

    </script>
</body>
</html>